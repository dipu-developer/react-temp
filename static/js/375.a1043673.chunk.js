"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[375],{6161:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(5043),n=t(9804),l=t(2134),r=t(6058),i=t(461);t.p,t.p;var c=t(7955),o=t(2680),d=t(568),m=t(7427),h=t(5842),x=t(9724),u=(t(1106),t(7256)),b=t(579);i.t1.register(i.PP,i.kc,i.FN,i.No,i.hE,i.m_,i.s$);const j=()=>{const[e,s]=(0,a.useState)(""),[t,i]=(0,a.useState)(""),j=(0,l.zy)(),{thing_name:p,sensor_name:N,thing_group:g}=j.state||{},[f,v]=(0,a.useState)(N),[y,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)(null),[_,k]=(JSON.parse(sessionStorage.getItem("userSession")),(0,a.useState)("day")),[F,T]=(0,a.useState)(null),[z,M]=(0,a.useState)([]),[D,A]=(0,a.useState)(null),[E,O]=(0,a.useState)("day"),[$,B]=(0,a.useState)(""),[L,P]=(0,a.useState)(""),[W,q]=(0,a.useState)(""),[G,J]=(0,a.useState)(""),[R,V]=(0,a.useState)(""),[H,I]=(0,a.useState)(""),[Y,K]=(0,a.useState)(""),[Q,U]=(0,a.useState)(""),[X,Z]=(0,a.useState)(""),[ee,se]=(0,a.useState)(""),[te,ae]=(0,a.useState)(""),[ne,le]=(0,a.useState)(""),[re,ie]=(0,a.useState)([]),[ce,oe]=(0,a.useState)(0),de=e=>{B(e.mac_address),P(parseFloat(e.maximum_threshold).toFixed(2)),q(parseFloat(e.minimum_threshold).toFixed(2)),J(e.thing_group),V(e.thing_name),I(e.thing_type),K(e.sensor_name),s(e.unit),U(e.batch_no),Z(e.mfg_date)},me=async(e,s)=>{try{const t="https://vx69sxxrp0.execute-api.us-east-1.amazonaws.com/Prod/iotDetails?limit=100",a=await fetch(t);if(a.ok){const t=await a.json(),n=function(e){for(let s=e.length-1;s>0;s--){const t=Math.floor(Math.random()*(s+1));[e[s],e[t]]=[e[t],e[s]]}return e.slice(0,16)}(JSON.parse(JSON.stringify(t,null,2))),l=n.map((e=>parseFloat(e.temp))),r=l[l.length-1];i(r);const c=he(n,e,s);M([]),A([]),M(c),be(c[_]),A(c[_])}else console.log("Failed to get data from server..")}catch(S){console.error("Error:",S)}finally{w(!1)}},he=(e,s,t)=>{const a=e.map((e=>e.dewPointin)),n=e.map((e=>e.humidity)),l=e.map((e=>e.temp));console.log("process min ",s),console.log("process max ",t);const r=xe(a,13),i=xe(n,16),c=xe(l,13);return{day:{labels:ue(12,2,2),datasets:[{label:"Time/H",data:r,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,tension:.4,pointBackgroundColor:function(e){const a=e.raw;return a<s||a>t?"red":"green"},pointRadius:4}]},month:{labels:ue(15,2,2),datasets:[{label:"Time/D",data:i,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,tension:.4,pointBackgroundColor:function(e){const a=e.raw;return a<s||a>t?"red":"green"},pointRadius:4}]},year:{labels:ue(12),datasets:[{label:"Time/M",data:c,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,tension:.4,pointBackgroundColor:function(e){const a=e.raw;return a<s||a>t?"red":"green"},pointRadius:4}]}}},xe=(e,s)=>{const t=[];for(let a=0;a<s-1;a++){const s=a;t.push(e[s]?parseFloat(e[s]):0)}return[...t]},ue=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array.from({length:e},((e,a)=>(t+a*s).toString()))};const be=e=>{const s=e.datasets[0].data,t=Math.min(...s),a=Math.max(...s),n=(s.reduce(((e,s)=>e+s),0)/s.length).toFixed(2);s[s.length-1];se(n),ae(t),le(a)};function je(e){k(e),O(e),be(z[e]),A(z[e])}(0,a.useEffect)((()=>{(async()=>{const e=p.replace(/ /g,"-");try{const s="https://vx69sxxrp0.execute-api.us-east-1.amazonaws.com/Prod/deviceList?thing_name="+e,t=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const e=await t.json();ie(e);const s=e.find((e=>e.sensor_name===N));if(s){de(s);const e=parseFloat(s.minimum_threshold).toFixed(2),t=parseFloat(s.maximum_threshold).toFixed(2);me(e,t)}}else console.log("Failed to get data from server..")}catch(S){console.log(S.message)}finally{w(!1)}})()}),[]);const pe={responsive:!0,plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,position:"left",text:`${Y}`}}},Ne=async e=>{if(f!==e){const s=re.find((s=>s.sensor_name===e));if(s){A([]);const t=parseFloat(s.minimum_threshold).toFixed(2),a=parseFloat(s.maximum_threshold).toFixed(2);await(async(e,s)=>{try{me(e,s)}catch(S){console.error("Error:",S)}finally{w(!1)}})(t,a),de(s),v(e)}}},ge=[{id:"1",sensoricon:u,name:"Multiple Sensor"},{id:"2",sensoricon:h,name:"CO2 Conc"},{id:"3",sensoricon:x,name:"Oxygen Conc"},{id:"4",sensoricon:c,name:"AFM Sensor 1"},{id:"5",sensoricon:o,name:"AFM Sensor 2"},{id:"6",sensoricon:d,name:"NO2 Conc"},{id:"7",sensoricon:m,name:"NO Conc"}];return(0,b.jsx)("div",{className:"content",children:(0,b.jsxs)("div",{className:"container-fluid",children:[(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-12",children:(0,b.jsxs)("div",{className:"page-title-box",children:[(0,b.jsx)("div",{className:"page-title-right",children:(0,b.jsxs)("ol",{className:"breadcrumb m-0",children:[(0,b.jsx)("li",{className:"breadcrumb-item",children:(0,b.jsx)("a",{href:"/device",children:"Device"})}),(0,b.jsx)("li",{className:"breadcrumb-item active",children:"Sensor Details"})]})}),(0,b.jsx)("h4",{className:"page-title",children:Y})]})})}),(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("div",{className:"card-body",children:(0,b.jsx)("div",{className:"button-list",children:re.map((e=>{const s=ge.find((s=>s.name===e.sensor_name));return(0,b.jsxs)("button",{type:"button",className:"btn waves-effect waves-light "+(f===e.sensor_name?"btn-blue":"btn-info"),onClick:()=>Ne(e.sensor_name),children:[(0,b.jsx)("span",{className:"btn-label",children:(0,b.jsx)("img",{src:s?s.sensoricon:s.multipledevice,alt:e.sensor_name,className:"img-fluid",width:15})}),e.sensor_name]},e.sensor_name)}))})})})})}),(0,b.jsxs)("div",{className:"row mb-1 ",children:[(0,b.jsx)("div",{className:"col-lg-3",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"card-body border ",children:[(0,b.jsx)("h4",{className:"header-title mb-2",children:"Sensor Details"}),(0,b.jsx)("div",{className:"widget-chart text-center",dir:"ltr",children:(0,b.jsx)(n.GaugeComponent,{value:t,type:"radial",labels:{valueLabel:{matchColorWithArc:!0,formatTextValue:s=>`${s} ${e}`},tickLabels:{type:"outer",ticks:[{value:20},{value:40},{value:60},{value:80},{value:100}],defaultTickValueConfig:{formatTextValue:s=>`${s} ${e}`}}},arc:{colorArray:["#5BE12C","#EA4228"],subArcs:[{limit:10},{limit:30},{},{},{}],padding:.02,width:.3},pointer:{elastic:!0,animationDelay:0}})}),(0,b.jsxs)("div",{className:"row mt-3",children:[(0,b.jsxs)("div",{className:"col-6 text-center",children:[(0,b.jsx)("p",{className:"text-muted font-15 mb-1 text-truncate",children:"Current"}),(0,b.jsxs)("h4",{children:[t," ",(0,b.jsx)("span",{className:"text-danger font-size-12",children:e})]})]}),(0,b.jsxs)("div",{className:"col-6 text-center",children:[(0,b.jsx)("p",{className:"text-muted font-15 mb-1 text-truncate",children:"Average"}),(0,b.jsxs)("h4",{children:[ee," ",(0,b.jsx)("span",{className:"text-danger font-size-12",children:e})]})]})]})]})})}),(0,b.jsx)("div",{className:"col-lg-5",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"card-body pb-2 border",children:[(0,b.jsx)("div",{className:"float-end d-none d-md-inline-block",children:(0,b.jsxs)("div",{className:"btn-group mb-2",children:[(0,b.jsx)("button",{type:"button",className:"btn-square text-capitalize btn btn-outline-blue btn-sm me-2 "+("day"===E?"bg-blue text-white":""),onClick:()=>je("day"),children:"Day"}),(0,b.jsx)("button",{type:"button",className:"btn-square text-capitalize btn btn-outline-blue btn-sm me-2 "+("month"===E?"bg-blue text-white":""),onClick:()=>je("month"),children:"Month"}),(0,b.jsx)("button",{type:"button",className:"btn-square text-capitalize btn btn-outline-blue btn-sm "+("year"===E?"bg-blue text-white":""),onClick:()=>je("year"),children:"Year"})]})}),(0,b.jsx)("h4",{className:"header-title mb-3",children:"Sensor Details"}),(0,b.jsx)("div",{dir:"ltr",children:D?(0,b.jsx)(r.N1,{data:D,options:pe,height:175}):(0,b.jsx)("p",{children:"Loading chart data..."})})]})})}),(0,b.jsxs)("div",{className:"col-xl-4",children:[(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("div",{className:"card-body border",children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-3 text-center",children:[(0,b.jsx)("p",{className:"text-muted font-15 mb-1 text-truncate",children:"Low"}),(0,b.jsxs)("h4",{children:[te," ",(0,b.jsx)("span",{className:"text-danger font-size-12",children:e})]})]}),(0,b.jsxs)("div",{className:"col-3 text-center",children:[(0,b.jsx)("p",{className:"text-muted font-15 mb-1 text-truncate",children:"High"}),(0,b.jsxs)("h4",{children:[ne," ",(0,b.jsx)("span",{className:"text-danger font-size-12",children:e})]})]}),(0,b.jsxs)("div",{className:"col-3 text-center",children:[(0,b.jsx)("p",{className:"text-muted font-15 mb-1 text-truncate",children:"Min Threshold"}),(0,b.jsxs)("h4",{children:[W," ",(0,b.jsx)("span",{className:"text-danger font-size-12",children:e})]})]}),(0,b.jsxs)("div",{className:"col-3 text-center",children:[(0,b.jsx)("p",{className:"text-muted font-15 mb-1 text-truncate",children:"Max Threshold"}),(0,b.jsxs)("h4",{children:[L," ",(0,b.jsx)("span",{className:"text-danger font-size-12",children:e})]})]})]})})}),(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("div",{className:"card-body border",children:(0,b.jsxs)("div",{className:"row mt-2",children:[(0,b.jsx)("h4",{className:"header-title mb-0",children:"Sensor configuration Details"}),(0,b.jsx)("div",{id:"cardCollpase5",className:"collapse show",children:(0,b.jsx)("div",{className:"table-responsive pt-3",children:(0,b.jsx)("table",{className:"table table-hover table-centered mb-0 config-table",children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-body fw-bold",children:"Device Id"}),(0,b.jsx)("td",{className:"text-blue",children:$})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-body fw-bold",children:"Thing Name"}),(0,b.jsx)("td",{className:"text-blue",children:R})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-body fw-bold",children:"Thing Group"}),(0,b.jsx)("td",{className:"text-blue",children:G})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-body fw-bold",children:"Thing Type"}),(0,b.jsx)("td",{className:"text-blue",children:H})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-body fw-bold",children:"Sensor"}),(0,b.jsx)("td",{className:"text-blue",children:Y})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-body fw-bold",children:"Batch No"}),(0,b.jsx)("td",{className:"text-blue",children:Q})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"text-body fw-bold",children:"Manufacture Date"}),(0,b.jsx)("td",{className:"text-blue",children:X})]})]})})})})]})})})]})]})]})})}}}]);
//# sourceMappingURL=375.a1043673.chunk.js.map